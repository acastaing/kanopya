<config use_conf="test_conf">
  <conf graph_dir="/tmp/monitor/graph" label="test_conf" period="86400" rrd_base_dir="/var/cache/mcs/monitor/base" time_step="30">
    <generate_graph>
      <graph ds_label="memCached" graph_type="stack" percent="no" set_label="mem" with_total="no" />
      <graph ds_label="User,Wait,Nice,Syst,Kernel,Interrupt,Idle" graph_type="stack" percent="yes" set_label="cpu" with_total="no" />
      <graph ds_label="" graph_type="line" percent="no" set_label="apache_stat" with_total="no" />
      <graph ds_label="" graph_type="line" percent="no" set_label="apache_stat_workers" with_total="no" />
      <graph ds_label="" graph_type="line" percent="no" set_label="apache_stat_reqsec" with_total="no" />
      <graph ds_label="" graph_type="line" percent="no" set_label="net" with_total="no" />
      <graph ds_label="IOSent,IOReceive" graph_type="line" percent="no" set_label="io" with_total="no" />
    </generate_graph>
    <monitor set="mem" />
    <monitor set="cpu" />
    <monitor set="apache_stat" />
    <monitor set="apache_stat_workers" />
    <monitor set="apache_stat_reqsec" />
    <monitor set="net" />
    <monitor set="io" />
    <node_states starting_max_time="120" stopping_max_time="60" />
  </conf>
  <connection login="admin" password="admin" />
  <internalnetwork gateway="10.0.0.254" ip="10.0.0.0" mask="255.255.255.0" />
  <set data_provider="SnmpProvider" ds_type="COUNTER" label="info" max="">
    <ds color="FF000055" label="IpOut" oid=".1.3.6.1.2.1.2.2.1.16.1" />
  </set>
  <set data_provider="FuncProvider" ds_type="COUNTER" label="gen_counter" max="">
    <ds color="00FF00" label="gen_var1" oid="" />
    <ds color="00FF00" label="gen_var2" oid="" />
  </set>
  <set data_provider="FuncProvider" ds_type="GAUGE" label="gen" max="gen_var3">
    <ds color="00FF00" label="gen_var3" oid="" />
    <ds color="FF0000" label="gen_var4" oid="" />
    <ds color="0000FF" label="gen_var5" oid="" />
  </set>
  <set component="Openiscsi" data_provider="SnmpProvider" ds_type="COUNTER" label="iscsi" table_oid=".1.3.6.1.3.1.1.1.6">
    <ds color="00FF00" label="rx_octets" oid="17" />
    <ds color="FF0000" label="tx_octets" oid="30" />
  </set>
  <set data_provider="MySqlProvider" ds_type="GAUGE" label="mysql" max="">
    <ds color="00FF00" label="buffer_free" oid="Innodb_buffer_pool_pages_free" />
  </set>
  <set data_provider="MySqlProvider" ds_type="COUNTER" label="mysql_counters" max="">
    <ds color="FF0000" label="slow_queries" oid="Slow_queries" />
    <ds color="FFFF00" label="table_locks_waited" oid="Table_locks_waited" />
    <ds color="00FF00" label="bytes_received" oid="Bytes_received" />
  </set>
  <set data_provider="SnmpProvider" ds_type="GAUGE" label="mem" max="memTotal">
    <ds color="FFFF0055" comm="total ram" label="memTotal" oid=".1.3.6.1.4.1.2021.4.5.0" />
    <ds color="00FF0055" comm="free ram" label="memAvail" oid=".1.3.6.1.4.1.2021.4.6.0" />
    <ds color="0000FF55" label="memBuffered" oid=".1.3.6.1.4.1.2021.4.14.0" />
    <ds color="FF000055" label="memCached" oid=".1.3.6.1.4.1.2021.4.15.0" />
  </set>
  <set data_provider="SnmpProvider" ds_type="COUNTER" label="cpu" max="User+Idle+Wait+Nice+Syst+Kernel+Interrupt">
    <ds color="FF000055" label="User" oid=".1.3.6.1.4.1.2021.11.50.0" />
    <ds color="FF00FF55" label="Wait" oid=".1.3.6.1.4.1.2021.11.54.0" />
    <ds color="FFFF0055" label="Nice" oid=".1.3.6.1.4.1.2021.11.51.0" />
    <ds color="00FF0055" comm="sometimes implemented as 'ssCpuRawWait(54)' + 'ssCpuRawKernel(55)'" label="Syst" oid=".1.3.6.1.4.1.2021.11.52.0" />
    <ds color="0000FF55" label="Kernel" oid=".1.3.6.1.4.1.2021.11.55.0" />
    <ds color="66666655" label="Interrupt" oid=".1.3.6.1.4.1.2021.11.56.0" />
    <ds color="00FFFF55" label="Idle" oid=".1.3.6.1.4.1.2021.11.53.0" />
  </set>
  <set component="Apache" data_provider="ApacheProvider" ds_type="GAUGE" label="apache_stat" max="">
    <ds color="FF00FF" label="CPULoad" oid="CPULoad" />
    <ds color="FFFF00" label="ReqPerSec" oid="ReqPerSec" />
    <ds color="00FF00" label="BytesPerSec" oid="BytesPerSec" />
    <ds color="0000FF" label="BytesPerReq" oid="BytesPerReq" />
  </set>
  <set component="Apache" data_provider="ApacheProvider" ds_type="GAUGE" label="apache_stat_workers" max="">
    <ds color="00FF00" label="IdleWorkers" oid="IdleWorkers" />
    <ds color="FF0000" label="BusyWorkers" oid="BusyWorkers" />
  </set>
  <set component="Apache" data_provider="ApacheProvider" ds_type="DERIVE" label="apache_stat_reqsec" max="">
    <ds color="00FF00" label="ReqPerSec" min="0" oid="Total Accesses" />
  </set>
  <set ds_type="COUNTER" label="net">
    <ds color="00FF00" label="IpDataReceived" oid=".1.3.6.1.2.1.4.31.1.1.3.1" />
    <ds color="00FF00" label="IpDataReceived2" oid=".1.3.6.1.2.1.4.31.1.1.3.2" />
    <ds color="0000FF" label="InputDiscarded" oid=".1.3.6.1.2.1.4.31.1.1.17.1" />
    <ds color="00FFFF" label="IpDataDelivred" oid=".1.3.6.1.2.1.4.31.1.1.18.1" />
    <ds color="FF00FF" label="IpDataOutRequest" oid=".1.3.6.1.2.1.4.31.1.1.20.1" />
  </set>
  <set ds_type="COUNTER" label="iptable" table_oid="1.3.6.1.2.1.4.31.1">
    <ds color="00FF00" label="IpDataReceived" oid="3" />
    <ds color="FF00FF" label="IpDataOutRequest" oid="20" />
  </set>
  <set ds_type="COUNTER" label="io">
    <ds color="0000FF" comm="Number of blocks sent to a block device" label="IOSent" oid=".1.3.6.1.4.1.2021.11.57.0" />
    <ds color="00FF00" comm="Number of blocks received from a block device" label="IOReceive" oid=".1.3.6.1.4.1.2021.11.58.0" />
  </set>
  <set ds_type="COUNTER" index_oid="2" label="diskIOTable" table_oid="1.3.6.1.4.1.2021.13.15.1">
    <ds color="00FF00" label="bytesRead" oid="3" />
    <ds color="FF00FF" label="bytesWritten" oid="4" />
  </set>
</config>
