USE `kanopya`;
SET foreign_key_checks=1;
SET @admin_cluster := 1;
SET @physical_hoster := 2;
SET @eid := 3;

--
-- permanents data
--

--
-- class type list
--

-- Do not put abstract types here (eg. ServiceProvider)

INSERT INTO `class_type` VALUES
(2, 'Entity::Gp'),
(3, 'Entity::Host'),
(4, 'Entity::Hostmodel'),
(5, 'Entity::Infrastructure'),
(6, 'Entity::Kernel'),
(7, 'Entity::Powersupplycard'),
(8, 'Entity::Powersupplycardmodel'),
(9, 'Entity::Processormodel'),
(10, 'Entity::Systemimage'),
(11, 'Entity::Tier'),
(12, 'Entity::User'),
(13, 'Entity::ServiceProvider::Inside::Cluster'),
(14, 'Entity::ServiceProvider::Inside::Server'),
(15, 'Entity::ServiceProvider::Outside::Netapp'),
(16, 'Entity::ServiceProvider::Outside::UnifiedComputingSystem'),
(17, 'Entity::ContainerAccess::IscsiContainerAccess'),
(18, 'Entity::ContainerAccess::NfsContainerAccess'),
(19, 'Entity::Container::LvmContainer'),
(20, 'Entity::Component::Lvm2'),
(21, 'Entity::Component::Iscsitarget1'),
(22, 'Entity::Component::Apache2'),
(23, 'Entity::Component::Atftpd0'),
(24, 'Entity::Component::Dhcpd3'),
(25, 'Entity::Component::HAProxy1'),
(26, 'Entity::Component::Iptables1'),
(27, 'Entity::Component::Keepalived1'),
(28, 'Entity::Component::Memcached1'),
(29, 'Entity::Component::Linux0'),
(30, 'Entity::Component::Mysql5'),
(31, 'Entity::Component::Openiscsi2'),
(32, 'Entity::Component::Openldap1'),
(33, 'Entity::Component::Opennebula3'),
(34, 'Entity::Component::Openssh5'),
(35, 'Entity::Component::Php5'),
(36, 'Entity::Component::Pleskpanel10'),
(37, 'Entity::Component::Snmpd5'),
(38, 'Entity::Component::Syslogng3'),
(39, 'Entity::Component::Nfsd3'),
(40, 'Entity::Connector::ActiveDirectory'),
(41, 'Entity::Connector::Scom'),
(42, 'Entity::ServiceProvider::Outside::Externalcluster'),
(48, 'Entity::Component::Physicalhoster0'),
(49, 'Entity::Poolip'),
(50, 'Entity::Network::Vlan'),
(51, 'Entity::Masterimage'),
(52, 'Entity::Connector::UcsManager'),
(53, 'Entity::Component::Fileimagemanager0'),
(57, 'Entity::Connector::NetappManager'),
(58, 'Entity::Connector::NetappLunManager'),
(59, 'Entity::Connector::NetappVolumeManager'),
(60, 'Entity::Container::NetappLun'),
(61, 'Entity::Container::NetappVolume'),
(62, 'Entity::Container::FileContainer'),
(63, 'Entity::ContainerAccess::FileContainerAccess'),
(64, 'Entity::ManagerParameter'),
(65, 'Entity::NfsContainerAccessClient'),
(71, 'Entity::Network'),
(72, 'Entity::InterfaceRole'),
(73, 'Entity::Interface'),
(74, 'Entity::Iface'),
(75, 'Entity::NetappAggregate'),
(76, 'Entity::Component::Puppetagent2'),
(77, 'Entity::Component::Puppetmaster2'),
(78, 'Entity::Component::Kanopyacollector1'),
(79, 'Entity::Connector::Sco'),
(80, 'Entity::Connector::MockMonitor'),
(81, 'Entity::Component::Kanopyaworkflow0'),
(82, 'Entity::Billinglimit');

--
-- entity comment list
--

INSERT INTO `entity_comment` VALUES
(1, 'Used when no vlan are required'),
(2, 'Network used for system administration'),
(3, 'Network used for public access'),
(4, 'Network used for virtual machines');

--
-- profile
--

INSERT INTO `profile` VALUES
(1, 'Super Admin', 'God profile : full access to the user interface.'),
(2, 'Administrator', 'administrator profile'),
(3, 'Services Developer', 'services dev profile'),
(4, 'Sale', 'sale profile'),
(5, 'Customer', 'customer profile');

--
-- system groups
--

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @MasterUserGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'User','User', 'User master group containing all users',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @PrcessormodelGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Processormodel','Processormodel','Processormodel master group containing all processor models',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @HostmodelGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Hostmodel','Hostmodel','Hostmodel master group containing all host models',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @HostGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Host','Host','Host master group containing all hosts',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @ClusterGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Cluster','Cluster','Cluster master group containing all clusters',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @KernelGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Kernel','Kernel','Kernel master group containing all kernels',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @SystemimageGroup_eid = @eid ;
INSERT INTO `gp` VALUES(@eid,'Systemimage','Systemimage','Systemimage master group containing all system images',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @OperationtypeGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Operationtype','Operationtype','Operationtype master group containing all operations',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @PowersupplycarmodelGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Powersupplycardmodel','Powersupplycardmodel','Powersupplycardmodel master group  containing all powersupply card models',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL); SET @PowersupplycardGroup_eid = @eid;
INSERT INTO `gp` VALUES(@eid,'Powersupplycard','Powersupplycard','Powersupplycard master group  containing all power supply cards',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES(@eid,'Masterimage','Masterimage','Masterimage master group containing all master images',1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES(@eid,'Gp','Gp','Groups master group containing all groups',1);
SET @eid := @eid +1;

--
-- predefined groups
--

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'Admin','User','Privileged users for administration tasks',0);
SET @Admin_group_id = @eid;
SET @eid := @eid +1;


INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'GuestGroup','User','Guest users with limited permissions',0);
SET @GuestGroup_eid = @eid;
SET @Guest_group_id = @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'Applimanager','User','privilege on componenent and cluster',0);
SET @Applimanager_eid=@eid ;
SET @Appli_group_id = @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'Systemmanager','User','privilege on Distibution and Systemimage',0);
SET @Systemmamager_group_id = @eid;
SET @Systemmanager_eid = @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'Hardwargroup','User','privilege on Host Hostmodel Kernel ',0);
SET @Hardwar_eid=@eid;
SET @Hardwar_group_id =@eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'Usermanager','User','owner entity',0);
SET @Usermanager_eid=@eid;
SET @Usermanager_group_id =@eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'Visitor','User','Visitor',0);
SET @Visitor_eid=@eid;
SET @Visitor_group_id =@eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 2, NULL);
INSERT INTO `gp` VALUES (@eid,'Component','Component','Component group containing all components',0);
SET @Component_eid=@eid;
SET @Component_group_id =@eid;
SET @eid := @eid +1;

--
-- system user
--

INSERT INTO `entity` VALUES (@eid, 12, NULL);
INSERT INTO `user` VALUES
(@eid,1,'executor',MD5('[% admin_password %]'),'Kanopya','Executor','dev@hederatech.com',CURRENT_DATE(),NULL,'User used by executor');
INSERT INTO `user_profile` VALUES(@eid, 1);
SET @eid := @eid +1;

--
-- predefined user
--

INSERT INTO `entity` VALUES (@eid, 12, NULL);
INSERT INTO `user` VALUES
(@eid,1,'admin',MD5('[% admin_password %]'),'Kanopya','Administrator','dev@hederatech.com',CURRENT_DATE(),NULL,'God user for administrative tasks.');
INSERT INTO `user_profile` VALUES(@eid, 1);
INSERT INTO `ingroups` VALUES (@Admin_group_id, @eid);
SET @adminuserid := @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 12, NULL);
INSERT INTO `user` VALUES (@eid,0,'guest',MD5('guest'),'Guest','','guest@somewhere.com',CURRENT_DATE(),NULL,'Guest user with limited permissions.');
INSERT INTO `ingroups` VALUES (@Guest_group_id, @eid);
SET @guest_user_eid = @eid;
SET @eid := @eid +1;

--
-- processor models
--

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'Generic','Generic',1,1.0,1,1,1,1);
SET @generic := @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'Intel','Atom 330',2,1.6,1,8,1,0);
SET @atom330 := @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'Intel','Atom D510',2,1.66,1,13,1,0);
SET @atomD510 := @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'VIA Nano','L2200',2,1.6,1,13,1,0);
SET @vianano := @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'Intel','i3-330',2,2.1,3,35,1,1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'Intel','i5-430',2,2.4,3,35,1,1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'Intel','i7-640M',2,2.8,4,35,1,1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'Intel','i7-720QM',4,1.6,6,45,1,1);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'AMD','Ontario',2,1.6,1,9,1,1);
SET @ontario := @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 9, NULL);
INSERT INTO `processormodel` VALUES (@eid,'AMD','G-T56N',2,1.6,1,18,1,1);
SET @eid := @eid +1;

--
-- powersupplycard models
--

INSERT INTO `entity` VALUES (@eid, 8, NULL);
INSERT INTO `powersupplycardmodel` VALUES (@eid,'HEDERATECH','notresupermodeldecarte',12);
SET @eid := @eid +1;

--
-- host models
--

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Generic','Generic','Generic',1,1,20,1,1,@generic);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Intel','DG945GCLF2','945GC',1,42,1,1,2,@atom330);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Asus','AT3GC-I','945GC',1,42,1,1,2,@atom330);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Asus','AT3N7A-I','NVIDIA ION',1,40,1,2,4,@atom330);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'J&W','MINIX ATOM330','945GC',1,46,1,1,2,@atom330);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Via','VB8001','VIA CN896',1,17,1,2,4,@vianano);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Gigabyte','GA-D510UD','INTEL NM10',1,26,1,2,4,@atomD510);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Intel','D510MO','INTEL NM10',1,21,1,2,4,@atomD510);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'Jetway','JNF81','Hudson E1',1,17,2,2,8,@ontario);
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 4, NULL);
INSERT INTO `hostmodel` VALUES (@eid,'IEI','Kino HM551','Intel HM55',1,32,2,2,8,NULL);
SET @eid := @eid +1;

--
-- operation types list
--

INSERT INTO `operationtype` VALUES

(1,'AddHost'),
(2,'ModifyHost'),
(3,'RemoveHost'),
(4,'ActivateHost'),
(5,'DeactivateHost'),
(6,'AddCluster'),
(7,'ModifyCluster'),
(8,'RemoveCluster'),
(9,'ActivateCluster'),
(10,'DeactivateCluster'),
(11,'StartCluster'),
(12,'StopCluster'),
(13,'AddSystemimage'),
(14,'CloneSystemimage'),
(15,'ModifySystemimage'),
(16,'RemoveSystemimage'),
(17,'ActivateSystemimage'),
(18,'DeactivateSystemimage'),
(19,'AddComponentToCluster'),
(20,'RemoveComponentFromCluster'),
(21,'StopNode'),
(22,'UpdateClusterNodeStarted'),
(23,'PreStartNode'),
(24,'StartNode'),
(25,'PreStopNode'),
(26,'PostStopNode'),
(27,'PostStartNode'),
(28,'InstallComponentOnSystemImage'),
(29,'DeployComponent'),
(30,'CreateDisk'),
(31,'CreateExport'),
(33,'ForceStopCluster'),
(34,'KanopyaMaintenance'),
(35,'AddInfrastructure'),
(36,'AddVirtualHost'),
(37,'MigrateHost'),
(38,'RemoveDisk'),
(39,'RemoveExport'),
(40,'DeployMasterimage'),
(41,'RemoveMasterimage'),
(42,'AddNode'),
(43,'ScaleCpuHost'),
(44,'ScaleMemoryHost'),
(45,'CancelWorkflow'),
(46,'LaunchSCOWorkflow'),
(47,'UpdatePuppetCluster'),
(48,'UpdateComponent'),
(49,'LaunchScaleInWorkflow'),
(50,'LaunchOptimiaasWorkflow');
--
-- Workflows definition
--

INSERT INTO `workflow_def` VALUES
(1,'AddNode', NULL),
(2,'StopNode', NULL),
(3,'OptimiaasWorkflow', NULL),
(4,'ScaleInWorkflow',NULL);

INSERT INTO `workflow_step` VALUES
(1, 1, 42),
(2, 1, 23),
(3, 1, 24),
(4, 1, 27),
(5, 2, 25),
(6, 2, 21),
(7, 2, 26),
(8, 3, 50),
(9, 4, 49);

--
-- components type list
--

INSERT INTO `component_type` VALUES
(1,'Lvm','2','Storage'),
(2,'Apache','2','Webserver'),
(3,'Iscsitarget','1','Export'),
(4,'Openiscsi','2','Exportclient'),
(5,'Dhcpd','3','Dhcpserver'),
(6,'Atftpd','0','Tftpserver'),
(7,'Snmpd','5','Monitoragent'),
(8,'Nfsd', '3', 'Export'),
(9,'Linux','0','System'),
(10,'Mysql','5','DBMS'),
(11,'Syslogng','3','Logger'),
(12,'Iptables','1','Firewall'),
(13,'Openldap','1','Annuary'),
(14,'Opennebula','3','Cloudmanager'),
(15,'Physicalhoster','0','Cloudmanager'),
(16,'Fileimagemanager','0','Storage'),
(17,'Puppetagent','2','Configurationagent'),
(18,'Puppetmaster','2','Configurationserver'),
(19,'Kanopyacollector','1','Collectormanager'),
(20, 'Keepalived','1','LoadBalancer'),
(21, 'Kanopyaworkflow','0','Workflowmanager');
--
-- connectors type list
--

INSERT INTO `connector_type` VALUES
(1,'ActiveDirectory','1','DirectoryServiceManager'),
(2,'Scom','1','Collectormanager'),
(3,'UcsManager','1','Cloudmanager'),
(4,'NetappLunManager','1','Storage'),
(5,'NetappVolumeManager','1','Storage'),
(6,'NetappLunManager','1','Export'),
(7,'NetappVolumeManager','1','Export'),
(8,'Sco',1,'WorkflowManager'),
(9,'MockMonitor','1','Collectormanager');

--
-- interace role list
--
INSERT INTO `entity` VALUES (@eid, 72, 2);
INSERT INTO `interface_role` VALUES (@eid, 'admin');
SET @adminrole = @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 72, 3);
INSERT INTO `interface_role` VALUES (@eid, 'public');
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 72, 4);
INSERT INTO `interface_role` VALUES (@eid, 'vms');
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 72, 5);
INSERT INTO `interface_role` VALUES (@eid, 'private');
SET @eid := @eid +1;

--
-- kernels
--

INSERT INTO `entity` VALUES (@eid, 6, NULL);
INSERT INTO `kernel` VALUES (@eid,'2.6.39.3','2.6.39.3','generic kernel with lots of modules');
SET @kernel := @eid;
SET @eid := @eid +1;

INSERT INTO `entity` VALUES (@eid, 6, NULL);
INSERT INTO `kernel` VALUES (@eid,'2.6.32-5-xen-amd64','2.6.32-5-xen-amd64','Xen kernel for opennebula cluster');
SET @eid := @eid +1;

--
-- kanopya cluster
--

INSERT INTO `entity` VALUES (@admin_cluster, 13, NULL);
INSERT INTO `service_provider` VALUES (@admin_cluster);
INSERT INTO `inside` VALUES (@admin_cluster);
INSERT INTO `cluster` VALUES (@admin_cluster, 'Kanopya','Main Cluster hosting Administrator, Executor, Boot server and NAS',0,1,1,500,'',0,0,'[% admin_domainname %]', '127.0.0.1', '127.0.0.1', 'up:[% tmstp %]', NULL, 'test_', 1, @adminuserid, @kernel, NULL, NULL);

--
-- kanopya cluster interface
--
INSERT INTO `entity` VALUES (@eid, 73, NULL);
INSERT INTO `interface` VALUES (@eid, @adminrole, @admin_cluster);
SET @kanopya_cluster_interface = @eid;
SET @eid := @eid +1;

--
-- admin network
--
INSERT INTO `entity` VALUES (@eid, 71, NULL);
INSERT INTO `network` VALUES (@eid, 'admin');
SET @admin_network = @eid;
SET @eid := @eid +1;

--
-- link admin network to kanopya cluster interface
--
INSERT INTO `interface_network` VALUES (@kanopya_cluster_interface, @admin_network);

--
-- admin host
--

INSERT INTO `entity` VALUES (@eid, 3, NULL);
INSERT INTO `host` VALUES (@eid, @physical_hoster, NULL, NULL,@kernel,'',NULL, 'Admin host',1,'[% kanopya_initiator %]','4294967296', '4','[% kanopya_hostname %]', 'up:[% tmstp %]',NULL);
SET @admin_host := @eid;
SET @eid := @eid +1;

--
-- admin poolip
--
INSERT INTO `entity` VALUES (@eid, 49, NULL);
INSERT INTO `poolip` VALUES (@eid, 'kanopya_admin', '[% poolip_addr %]', '[% poolip_mask %]', '[% poolip_netmask %]', '[% poolip_gateway %]');
SET @poolid = @eid;
SET @eid := @eid +1;

--
-- link admin network to admin poolip
--
INSERT INTO `network_poolip` VALUES (@admin_network, @poolid);

--
-- admin iface
--
INSERT INTO `entity` VALUES (@eid, 74, NULL);
INSERT INTO `iface` VALUES (@eid,'eth0','[% mb_hw_address %]',0,@admin_host, @kanopya_cluster_interface);
SET @admin_iface := @eid;
SET @eid := @eid +1;

--
-- internal ip for admin node
--

INSERT INTO `ip` VALUES (1,'[% poolip_addr %]', @poolid, @admin_iface);

--
-- admin node
--


INSERT INTO `externalnode` VALUES (1, '[% kanopya_hostname %]', @admin_cluster,'disabled',NULL);
INSERT INTO `node` VALUES (1, @admin_cluster, @admin_host,1,'in:[% tmstp %]',NULL,1, NULL);

--
-- components templates
--

INSERT INTO `component_template` VALUES (1,'defaultapache','/templates/components/apache2', 2);
INSERT INTO `component_template` VALUES (2,'dhcpd','/templates/components/dhcpd', 5);
INSERT INTO `component_template` VALUES (3,'snmpd','/templates/components/snmpd', 7);
INSERT INTO `component_template` VALUES (4,'iscsitarget','/templates/components/ietd', 3);
INSERT INTO `component_template` VALUES (5,'linux','/templates/components/linux', 9);
INSERT INTO `component_template` VALUES (6,'nfsd','/templates/components/nfsd3', 8);


--
-- initial components for admin cluster:
--

--
-- LVM2 component
--

INSERT INTO `entity` VALUES (@eid, 20, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,1,NULL,NULL);
INSERT INTO `lvm2` VALUES(@eid);
SET @lvm_component := @eid;
SET @eid := @eid +1;

--
-- main vg storage from only one pv
--

INSERT INTO `lvm2_vg` VALUES (1, @lvm_component,'[% kanopya_vg_name %]','[% kanopya_vg_free_space %]','[% kanopya_vg_size %]');
SET @pvid := 1;
[% FOREACH pv = kanopya_pvs %]
INSERT INTO `lvm2_pv` VALUES (@pvid,1,'[% pv %]');
SET @pvid := @pvid +1;
[% END %]

--
-- iscsitarget
--

INSERT INTO `entity` VALUES (@eid, 21, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,3,NULL,NULL);
INSERT INTO `iscsitarget1` VALUES(@eid);
SET @iscsi_component := @eid;
SET @eid := @eid +1;

--
-- dhcpd configuration
--

INSERT INTO `entity` VALUES (@eid, 24, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,5,NULL,2);
INSERT INTO `dhcpd3` VALUES (@eid,'hedera-technology.com',NULL,'node001');
INSERT INTO `dhcpd3_subnet` VALUES (1,@eid,'[% ipv4_internal_network_ip %]','[% poolip_netmask %]','[% poolip_gateway %]');
SET @eid := @eid +1;

--
-- atftp configuration
--

INSERT INTO `entity` VALUES (@eid, 23, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,6,NULL,NULL);
INSERT INTO `atftpd0` VALUES (@eid,'--daemon --tftpd-timeout 300 --retry-timeout 5 --no-multicast --maxthread 100 --verbose=5', 'FALSE', '/var/log/atftpd.log','/tftp');
SET @eid := @eid +1;

--
--	snmpd
--

INSERT INTO `entity` VALUES (@eid, 37, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,7,NULL,3);
INSERT INTO `snmpd5` VALUES(@eid, '[% poolip_addr %]', '-Lsd -Lf /dev/null -u snmp -I -smux -p /var/run/snmpd.pid');
SET @eid := @eid +1;

--
-- Nfsd
--

INSERT INTO `entity` VALUES (@eid, 39, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,8,NULL,6);
INSERT INTO `nfsd3` VALUES(@eid,NULL,'no',8,0,NULL,'no',NULL);
SET @eid := @eid +1;

--
-- Syslogng
--

INSERT INTO `entity` VALUES (@eid, 38, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,11,NULL,NULL);
INSERT INTO `syslogng3` VALUES(@eid);
SET @eid := @eid +1;

--
-- Puppetmaster
--

INSERT INTO `entity` VALUES (@eid, 77, NULL);
INSERT INTO `component` VALUES(@eid,@admin_cluster,18,NULL,NULL);
INSERT INTO `puppetmaster2` VALUES(@eid,NULL);
SET @eid := @eid +1;

--
-- Openiscsi
--

INSERT INTO `entity` VALUES (@eid, 31, NULL);
INSERT INTO `component` VALUES(@eid, @admin_cluster, 4, NULL, NULL);
INSERT INTO `openiscsi2` VALUES(@eid);
SET @eid := @eid +1;

--
-- Physicalhoster
--

INSERT INTO `entity` VALUES (@physical_hoster, 48, NULL);
INSERT INTO `component` VALUES(@physical_hoster, @admin_cluster, 15, NULL, NULL);
INSERT INTO `physicalhoster0` VALUES(@physical_hoster);

--
-- Fileimagemanager0
--

INSERT INTO `entity` VALUES (@eid, 53, NULL);
INSERT INTO `component` VALUES(@eid, @admin_cluster, 16, NULL, NULL);
INSERT INTO `fileimagemanager0` VALUES(@eid);
SET @eid := @eid +1;

--
-- KanopyaCollector
--

INSERT INTO `entity` VALUES (@eid, 78, NULL);
INSERT INTO `component` VALUES(@eid, @admin_cluster, 19, NULL, NULL);
INSERT INTO `kanopyacollector1` VALUES(@eid, 3600, 86400);
SET @eid := @eid +1;

--
-- Kanopyaworkflow
--

INSERT INTO `entity` VALUES (@eid, 81, NULL);
INSERT INTO `component` VALUES(@eid, @admin_cluster, 21, NULL, NULL);
INSERT INTO `kanopyaworkflow0` VALUES(@eid);
SET @eid := @eid +1;



--
-- Scopes
--

INSERT INTO `scope` VALUES (1,'node');
INSERT INTO `scope` VALUES (2,'service_provider');


--
-- Scopes Parameters
--

INSERT INTO `scope_parameter` VALUES (1,1,'ou_from');
INSERT INTO `scope_parameter` VALUES (2,1,'node_hostname');
INSERT INTO `scope_parameter` VALUES (3,2,'service_provider_name');

--
-- Initial Host manager for kanopya cluster
--

INSERT INTO `service_provider_manager` VALUES (1, @admin_cluster, 'host_manager', @physical_hoster, null);


--
-- Monitoring data
--

INSERT INTO `indicatorset` VALUES
(1,'mem','SnmpProvider','GAUGE', null, 'Total', null),
(2,'cpu','SnmpProvider','COUNTER', null, 'User+Idle+Wait+Nice+Syst+Kernel+Interrupt', null),
(3,'apache_stats','ApacheProvider','DERIVE', 'Apache', null, null),
(4,'apache_workers','ApacheProvider','GAUGE', 'Apache', null, null),
(5,'scom','External','GAUGE', null, null, null),
(6,'billing', 'KanopyaDatabaseProvider','GAUGE', null, null, null);

INSERT INTO `indicator` VALUES
(1,'Total','.1.3.6.1.4.1.2021.4.5.0',null,null,'FFFF0066', 1, 'KBytes', null),
(2,'Avail','.1.3.6.1.4.1.2021.4.6.0',null,null,'00FF0066', 1, 'KBytes', null),
(3,'Buffered','.1.3.6.1.4.1.2021.4.14.0',null,null,'0000FF66', 1, 'KBytes', null),
(4,'Cached','.1.3.6.1.4.1.2021.4.15.0',null,null,'FF000066', 1, 'KBytes', null),
(5,'User','.1.3.6.1.4.1.2021.11.50.0',null,null,'0000FF66', 2, '%', null),
(6,'Wait','.1.3.6.1.4.1.2021.11.54.0',null,null,'FF000066', 2, '%', null),
(7,'Nice','.1.3.6.1.4.1.2021.11.51.0',null,null,'FFFF0066', 2, '%', null),
(8,'Syst','.1.3.6.1.4.1.2021.11.52.0',null,null,'00FFFF66', 2, '%', null),
(9,'Kernel','.1.3.6.1.4.1.2021.11.55.0',null,null,'FF00FF66', 2, '%', null),
(10,'Interrupt','.1.3.6.1.4.1.2021.11.56.0',null,null,'66666666', 2, '%', null),
(11,'Idle','.1.3.6.1.4.1.2021.11.53.0',null,null,'00FF0066', 2, '%', null),
(12,'ReqPerSec','Total Accesses',0,null,'0000FF99', 3, null, null),
(13,'IdleWorkers','IdleWorkers',null,null,'00FF0099', 4, null, null),
(14,'BusyWorkers','BusyWorkers',null,null,'FF000099', 4, null, null),
(15,'RAM free','Memory/Available MBytes',null,null,'FF000099', 5, 'MBytes', null),
(16,'RAM pool paged','Memory/Pool Paged Bytes',null,null,'FF000099', 5, 'Bytes', null),
(17,'RAM used','Memory/PercentMemoryUsed',null,null,'FF000099', 5, '%', null),
(18,'CPU used','Processor/% Processor Time',null,null,'FF000099', 5, '%', null),
(19,'CPU Queue Length','System/Processor Queue Length',null,null,'FF000099', 5, 'process', null),
(20,'Disk idle time','LogicalDisk/% Idle Time',null,null,'FF000099', 5, '%', null),
(21,'Disk free space','LogicalDisk/% Free Space',null,null,'FF000099', 5, '%', null),
(22,'Network used','Network Adapter/PercentBandwidthUsedTotal',null,null,'FF000099', 5, '%', null),
(23,'Active Sessions','Terminal Services/Active Sessions',null,null,'FF000099', 5, 'sessions', null),
(24,'RAM I/O','Memory/Pages/sec',null,null,'FF000099', 5, 'pages/sec', null),
(25,'Cores', 'Number of charged cores', null, null, 'FF000099', 6, null, null),
(26,'Memory', 'Charged memory', null, null, 'FF000099', 6, null, null);

--
-- initial permissions for user guest
--

SET @id := 1;
INSERT INTO `entityright` VALUES (@id, @guest_user_eid, @guest_user_eid, 'get'); SET @id := @id+1;
INSERT INTO `entityright` VALUES (@id, @guest_user_eid, @guest_user_eid, 'update');SET @id := @id+1;
INSERT INTO `entityright` VALUES (@id, @MasterUserGroup_eid, @guest_user_eid, 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @GuestGroup_eid, @guest_user_eid, 'get');SET @id:=@id+1;
SET foreign_key_checks=1;


-- @Applimanager_eid
-- @Systemmanager_eid
-- @Hardwar_eid
-- @Usermanager_eid
-- @Visitor_eid=@eid

-- @MasterUserGroup_eid
-- @PrcessormodelGroup_eid
-- @HostmodelGroup_eid
-- @HostGroup_eid
-- @ClusterGroup_eid
-- @KernelGroup_eid
-- @SystemimageGroup_eid
-- @OperationtypeGroup_eid
-- @PowersupplycarmodelGroup_eid
-- @PowersupplycardGroup_eid

--
-- permission for Group Applimanager
--

INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'update');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'activate');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'deactivate');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'addComponent');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'addNode');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'create');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'remove');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'forceStop');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'removeNode');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'removeComponent');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'start');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'stop');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'getAttrDef');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'getCluster');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'getClusters');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'getState');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Applimanager_eid, 'setperm');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Applimanager_eid , 'get');SET @id:=@id+1;

--
-- permission for Group Systemmanager
--

INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'update');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'activate'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'create'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'deactivate'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'clone'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'cloneComponentsInstalledFrom'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'getInstalledComponents'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'getSystemimages'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'getSystemimage'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'installComponent'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'installedComponentLinkCreation'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'remove'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'getAttrDef'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid, @Systemmanager_eid , 'toString'); SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @KernelGroup_eid, @Systemmanager_eid , 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @KernelGroup_eid, @Systemmanager_eid , 'getKernels');SET @id:=@id+1;

--
-- permission for Group Hardwargroup @Hardwar_eid
--

INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'create');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'getAttrDef');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'getHostmodels');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'remove');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'toString');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'update');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid ,@Hardwar_eid , 'setperm');SET @id:=@id+1;

INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'update');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'activate');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'deactivate');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'toString');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'getEtcName');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'getEtcDev');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'getInternalIP');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'getModel');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'getHarddisks');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'addHarddisk');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'removeHarddisk');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid ,@Hardwar_eid , 'create');SET @id:=@id+1;


INSERT INTO `entityright` VALUES (@id, @PowersupplycarmodelGroup_eid   ,@Hardwar_eid , 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycarmodelGroup_eid   ,@Hardwar_eid , 'update');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycarmodelGroup_eid   ,@Hardwar_eid , 'toString');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycarmodelGroup_eid   ,@Hardwar_eid , 'remove');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycarmodelGroup_eid   ,@Hardwar_eid , 'getPowersupplycardmodels');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycarmodelGroup_eid   ,@Hardwar_eid , 'getAttrDef');SET @id:=@id+1;

INSERT INTO `entityright` VALUES (@id, @PowersupplycardGroup_eid  ,@Hardwar_eid , 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycardGroup_eid  ,@Hardwar_eid , 'update');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycardGroup_eid  ,@Hardwar_eid , 'toString');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycardGroup_eid  ,@Hardwar_eid , 'remove');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycardGroup_eid  ,@Hardwar_eid , 'getAttrDef');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycardGroup_eid  ,@Hardwar_eid , 'addPowerSupplyPort');SET @id:=@id+1;

INSERT INTO `entityright` VALUES (@id, @KernelGroup_eid   ,@Hardwar_eid , 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @KernelGroup_eid   ,@Hardwar_eid , 'toString');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @KernelGroup_eid   ,@Hardwar_eid , 'remove');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @KernelGroup_eid   ,@Hardwar_eid , 'getKernels');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @KernelGroup_eid   ,@Hardwar_eid , 'getAttrDef');SET @id:=@id+1;

--
-- permission for Group Hardwargroup @Visitor_eid=@eid
--

INSERT INTO `entityright` VALUES (@id, @ClusterGroup_eid, @Visitor_eid, 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @SystemimageGroup_eid , @Visitor_eid, 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostmodelGroup_eid , @Visitor_eid, 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @HostGroup_eid , @Visitor_eid, 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycarmodelGroup_eid , @Visitor_eid, 'get');SET @id:=@id+1;
INSERT INTO `entityright` VALUES (@id, @PowersupplycardGroup_eid , @Visitor_eid, 'get');SET @id:=@id+1;

--
-- Services and policies
--

-- Presets for policy: Default physical host
INSERT INTO `param_preset` VALUES (1, "hosting_policy", NULL, NULL);
INSERT INTO `param_preset` VALUES (2, "managers", NULL, 1);
-- host_manager
INSERT INTO `param_preset` VALUES (3, "host_manager", NULL, 2);
INSERT INTO `param_preset` VALUES (4, "manager_type", "host_manager", 3);
INSERT INTO `param_preset` VALUES (5, "manager_id", @physical_hoster, 3);
INSERT INTO `param_preset` VALUES (6, "manager_params", NULL, 3);
INSERT INTO `param_preset` VALUES (7, "ram", 1024, 6);
INSERT INTO `param_preset` VALUES (8, "ram_unit", "M", 6);
INSERT INTO `param_preset` VALUES (9, "cpu", 1, 6);

-- Presets for policy: Kanopya LVM disk exported via ISCSI
INSERT INTO `param_preset` VALUES (10, "storage_policy", NULL, NULL);
INSERT INTO `param_preset` VALUES (11, "managers", NULL, 10);
-- disk_manager
INSERT INTO `param_preset` VALUES (12, "disk_manager", NULL, 11);
INSERT INTO `param_preset` VALUES (13, "manager_type", "disk_manager", 12);
INSERT INTO `param_preset` VALUES (14, "manager_id", @lvm_component, 12);
-- export_manager
INSERT INTO `param_preset` VALUES (15, "export_manager", NULL, 11);
INSERT INTO `param_preset` VALUES (16, "manager_type", "export_manager", 15);
INSERT INTO `param_preset` VALUES (17, "manager_id", @iscsi_component, 15);

-- Presets for policy: Default network configuration
INSERT INTO `param_preset` VALUES (18, "network_policy", NULL, NULL);
INSERT INTO `param_preset` VALUES (19, "cluster_nameserver1", "127.0.0.1", 18);
INSERT INTO `param_preset` VALUES (20, "cluster_nameserver2", "127.0.0.1", 18);
INSERT INTO `param_preset` VALUES (21, "cluster_domainname", "hedera-technology.com", 18);
INSERT INTO `param_preset` VALUES (22, "interfaces", NULL, 18);
-- interface 'admin'
INSERT INTO `param_preset` VALUES (23, "admin", NULL, 22);
INSERT INTO `param_preset` VALUES (24, "interface_role", @adminrole, 23);
INSERT INTO `param_preset` VALUES (25, "interface_networks", NULL, 23);
INSERT INTO `param_preset` VALUES (26, NULL, @admin_network, 25);

-- Presets for policy: Cluster manual scalability
INSERT INTO `param_preset` VALUES (29, "scalability_policy", NULL, NULL);
INSERT INTO `param_preset` VALUES (30, "cluster_min_node", 1, 29);
INSERT INTO `param_preset` VALUES (31, "cluster_max_node", 10, 29);
INSERT INTO `param_preset` VALUES (32, "cluster_priority", 1, 29);

-- Presets for policy: Debian squeeze
INSERT INTO `param_preset` VALUES (33, "system_policy", NULL, NULL);
INSERT INTO `param_preset` VALUES (34, "cluster_si_shared", 0, 33);
INSERT INTO `param_preset` VALUES (35, "cluster_si_persistent", 0, 33);
INSERT INTO `param_preset` VALUES (36, "kernel_id", @kernel, 33);
INSERT INTO `param_preset` VALUES (37, "managers", NULL, 33);
-- disk_manager
INSERT INTO `param_preset` VALUES (38, "disk_manager", NULL, 37);
INSERT INTO `param_preset` VALUES (39, "manager_params", NULL, 38);
INSERT INTO `param_preset` VALUES (40, "systemimage_size", 5368709120, 39);
-- preinstalled component
INSERT INTO `param_preset` VALUES (41, "components", NULL, 33);
SET @cid = (SELECT component_type_id FROM `component_type` WHERE component_name = "Puppetagent" AND component_version = 2);
INSERT INTO `param_preset` VALUES (42, "puppetagent", NULL, 41);
INSERT INTO `param_preset` VALUES (43, "component_type", @cid, 42);
SET @cid = (SELECT component_type_id FROM `component_type` WHERE component_name = "Keepalived" AND component_version = 1);
INSERT INTO `param_preset` VALUES (44, "keepalived", NULL, 41);
INSERT INTO `param_preset` VALUES (45, "component_type", @cid, 44);

-- workflow scalein param preset
INSERT INTO `param_preset` values (46, "workflow_def_params", NULL, NULL);
INSERT INTO `param_preset` values (47, "specific", NULL, 46 );
INSERT INTO `param_preset` values (48, "scalein_type", NULL, 47 );
INSERT INTO `param_preset` values (49, "scalein_value", NULL, 47 );
INSERT INTO `param_preset` values (50, "automatic", NULL, 46 );
INSERT INTO `param_preset` values (51, "context", NULL, 50 );
INSERT INTO `param_preset` values (52, "cloudmanager_comp", NULL, 51 );
INSERT INTO `param_preset` values (53, "host", NULL, 51 );
INSERT INTO `param_preset` values (54, "internal", NULL, 46 );
INSERT INTO `param_preset` values (55, "scope_id", 1, 54 );

UPDATE `kanopya`.`workflow_def` SET `param_preset_id` = '46' WHERE `workflow_def`.`workflow_def_name` = 'ScaleInWorkflow';

-- workflow AddNode param preset
INSERT INTO `param_preset` VALUES (56, 'workflow_def_params', NULL, NULL);
INSERT INTO `param_preset` VALUES (57, 'automatic', NULL, 56);
INSERT INTO `param_preset` VALUES (58, "context", NULL, 57 );
INSERT INTO `param_preset` VALUES (59, "cluster", NULL, 58 );
INSERT INTO `param_preset` VALUES (60, "internal", NULL, 56 );
INSERT INTO `param_preset` VALUES (61, "scope_id", 2, 60 );

UPDATE `kanopya`.`workflow_def` SET `param_preset_id` = '56' WHERE `workflow_def`.`workflow_def_name` = 'AddNode';

-- associate native kanopya workflows to native kanopya workflow manager
SELECT @wf_manager_id:= component_id FROM `component` where component_type_id='21' and service_provider_id=@admin_cluster;

INSERT INTO `workflow_def_manager` VALUES (1,@wf_manager_id,1);
INSERT INTO `workflow_def_manager` VALUES (2,@wf_manager_id,4);

-- Default billing policy
INSERT INTO `param_preset` VALUES (62, "billing_policy", NULL, NULL);

INSERT INTO `policy` VALUES (1, 1, 'Default physical host', "Hosting policy for default physical hosts.", 'hosting');
INSERT INTO `policy` VALUES (2, 10, 'Kanopya LVM disk exported via ISCSI', "Datastore on Kanopya cluster for PXE boot via ISCSI.", 'storage');
INSERT INTO `policy` VALUES (3, 18, 'Default network configuration', "Default network configuration, with admin and public interfaces.", 'network');
INSERT INTO `policy` VALUES (4, 29, 'Cluster manual scalability', "Manual scalability.", 'scalability');
INSERT INTO `policy` VALUES (5, 33, 'Debian squeeze', "Hosting policy for standard physical hosts.", 'system');
INSERT INTO `policy` VALUES (6, 62, 'Empty billing configuration', "Empty billing configuration", 'billing');

INSERT INTO `service_template` VALUES (1, 'Standard physical cluster', "Service template for standard physical cluster declaration.", 1, 2, 3, 4, 5, 6, NULL);
